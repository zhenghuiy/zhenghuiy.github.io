

<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 6 页 | Zhenghui&#39;s World</title>
  <meta name="author" content="Zhenghui Yan">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Zhenghui&#39;s World"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="icon" type="image/x-ico">
  <link rel="alternate" href="/atom.xml" title="Zhenghui&#39;s World" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//libs.baidu.com/jquery/1.8.0/jquery.min.js"></script>
</head>


<body>
  <header id="header" class="inner">
<div class="alignleft">
  <h1><a href="/">Zhenghui&#39;s World</a></h1>
  <h2><a href="/">Write the code, change the world</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/archives">归档</a></li>
    
      <li><a href="/about">关于</a></li>
    
	<li> <a href="/atom.xml">RSS</a> </li>
<li> <a title="把这个链接拖到你的Chrome收藏夹工具栏中" href='javascript:(function() {
	function c() {
		var e = document.createElement("link");
		e.setAttribute("type", "text/css");
		e.setAttribute("rel", "stylesheet");
		e.setAttribute("href", f);
		e.setAttribute("class", l);
		document.body.appendChild(e)
	}
 
	function h() {
		var e = document.getElementsByClassName(l);
		for (var t = 0; t < e.length; t++) {
			document.body.removeChild(e[t])
		}
	}
 
	function p() {
		var e = document.createElement("div");
		e.setAttribute("class", a);
		document.body.appendChild(e);
		setTimeout(function() {
			document.body.removeChild(e)
		}, 100)
	}
 
	function d(e) {
		return {
			height : e.offsetHeight,
			width : e.offsetWidth
		}
	}
 
	function v(i) {
		var s = d(i);
		return s.height > e && s.height < n && s.width > t && s.width < r
	}
 
	function m(e) {
		var t = e;
		var n = 0;
		while (!!t) {
			n += t.offsetTop;
			t = t.offsetParent
		}
		return n
	}
 
	function g() {
		var e = document.documentElement;
		if (!!window.innerWidth) {
			return window.innerHeight
		} else if (e && !isNaN(e.clientHeight)) {
			return e.clientHeight
		}
		return 0
	}
 
	function y() {
		if (window.pageYOffset) {
			return window.pageYOffset
		}
		return Math.max(document.documentElement.scrollTop, document.body.scrollTop)
	}
 
	function E(e) {
		var t = m(e);
		return t >= w && t <= b + w
	}
 
	function S() {
		var e = document.createElement("audio");
		e.setAttribute("class", l);
		e.src = i;
		e.loop = false;
		e.addEventListener("canplay", function() {
			setTimeout(function() {
				x(k)
			}, 500);
			setTimeout(function() {
				N();
				p();
				for (var e = 0; e < O.length; e++) {
					T(O[e])
				}
			}, 15500)
		}, true);
		e.addEventListener("ended", function() {
			N();
			h()
		}, true);
		e.innerHTML = " <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>";
		document.body.appendChild(e);
		e.play()
	}
 
	function x(e) {
		e.className += " " + s + " " + o
	}
 
	function T(e) {
		e.className += " " + s + " " + u[Math.floor(Math.random() * u.length)]
	}
 
	function N() {
		var e = document.getElementsByClassName(s);
		var t = new RegExp("\\b" + s + "\\b");
		for (var n = 0; n < e.length; ) {
			e[n].className = e[n].className.replace(t, "")
		}
	}
 
	var e = 30;
	var t = 30;
	var n = 350;
	var r = 350;
	var i = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3";
	var s = "mw-harlem_shake_me";
	var o = "im_first";
	var u = ["im_drunk", "im_baked", "im_trippin", "im_blown"];
	var a = "mw-strobe_light";
	var f = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css";
	var l = "mw_added_css";
	var b = g();
	var w = y();
	var C = document.getElementsByTagName("*");
	var k = null;
	for (var L = 0; L < C.length; L++) {
		var A = C[L];
		if (v(A)) {
			if (E(A)) {
				k = A;
				break
			}
		}
	}
	if (A === null) {
		console.warn("Could not find a node of the right size. Please try a different page.");
		return
	}
	c();
	S();
	var O = [];
	for (var L = 0; L < C.length; L++) {
		var A = C[L];
		if (v(A)) {
			O.push(A)
		}
	}
})()    '>High一下</a> </li>

  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-08-07T07:26:33.000Z"><a href="/2014/08/07/谨慎使用静态注册的BroadcastReceiver/">Aug 7 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/08/07/谨慎使用静态注册的BroadcastReceiver/">谨慎使用静态注册的BroadcastReceiver</a></h1>
  

    </header>
    <div class="entry">
      
        <p>在Android中，BroadcastReceiver有两种注册方式。</p>
<p>第一种是静态注册，在<code>Androidmanifest.xml</code>文件中以类似activity注册的方式进行注册。</p>
<p>第二种是动态注册，在<code>onResume()</code>中注册，在<code>onPause()</code>中注销。</p>
<p>一般而言，我们需要根据具体的使用场景来判断使用何种注册方式。</p>
<p>静态注册的特点是接收设备全局的相应广播，尽管静态注册看起来比较方便，但实际上是十分耗费资源的。</p>
<p>现在使用以下代码进行测试。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class WifiReceiver extends BroadcastReceiver&#123;</span><br><span class="line">public static final String FLAG = &quot;WifiReceiver&quot;;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void onReceive(Context arg0, Intent arg1) &#123;</span><br><span class="line">if (arg1.getAction().equals(WifiManager.WIFI_STATE_CHANGED_ACTION)) &#123;</span><br><span class="line">int state = arg1.getIntExtra(WifiManager.EXTRA_WIFI_STATE, WifiManager.WIFI_STATE_DISABLED);</span><br><span class="line"></span><br><span class="line">if (state == WifiManager.WIFI_STATE_DISABLED) &#123;</span><br><span class="line">Log.v(FLAG,&quot;wifi is disabled!&quot;);</span><br><span class="line">&#125; else if (state == WifiManager.WIFI_STATE_ENABLED) &#123;</span><br><span class="line">Log.v(FLAG,&quot;wifi is enabled!&quot;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2014/08/07/谨慎使用静态注册的BroadcastReceiver/#more" class="more-link">阅读全文</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-08-03T07:05:35.000Z"><a href="/2014/08/03/[转]Java中单例模式的实现/">Aug 3 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/08/03/[转]Java中单例模式的实现/">[转]Java中单例模式的实现</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h2><p>近日在看Effective JAVA这本书，看到这一条的时候去网上查找下资料，发现了这篇写的不错的博客，因此觉得没有重复造轮子的必要，特此转载。</p>
<p>原文：</p>
<p>Inspired by Effective Java.</p>
<p>Singleton模式是在编程实践中应用最广泛的几种设计模式之一。以前知道的，实现单例的方法有两种(下面的A、B)。刚刚在读《Effective Java的时候》学到一种新的更好的方法(E)：单元素的枚举类型。同时通过网上资料也知道了其他两种方法(C、D)。最后一种在Java中从1.5版本开始支持，其他语言在验证后说明。</p>
<h2 id="A-饿汉式-类加载的时候就创建实例-。"><a href="#A-饿汉式-类加载的时候就创建实例-。" class="headerlink" title="A.饿汉式(类加载的时候就创建实例)。"></a>A.饿汉式(类加载的时候就创建实例)。</h2><p>代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class MaYun &#123;</span><br><span class="line"></span><br><span class="line">    public static final Mayun instance = new Mayun(); //静态的final的MaYun</span><br><span class="line">    </span><br><span class="line">    private MaYun() &#123;</span><br><span class="line">        //MaYun诞生要做的事情</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void splitAlipay() &#123;</span><br><span class="line">    </span><br><span class="line">        System.out.println(“Alipay是我的啦！看你丫Yahoo绿眉绿眼的望着。。。”);</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Call：MaYun.instance.splitAlipay();</span><br></pre></td></tr></table></figure></p>
<p><strong>Feature</strong>：可以通过反射机制攻击；线程安全[多个类加载器除外]。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2014/08/03/[转]Java中单例模式的实现/#more" class="more-link">阅读全文</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-08-01T06:56:08.000Z"><a href="/2014/08/01/Java中类的构造顺序/">Aug 1 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/08/01/Java中类的构造顺序/">Java中类的构造顺序</a></h1>
  

    </header>
    <div class="entry">
      
        <p>先看代码：</p>
<p>Father类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package com.zhenghuiyan.testorder;</span><br><span class="line"></span><br><span class="line">public class Father &#123;</span><br><span class="line">    public String fStr1 = &quot;father1&quot;;</span><br><span class="line">    protected String fStr2 = &quot;father2&quot;;</span><br><span class="line">    private String fStr3 = &quot;father3&quot;;</span><br><span class="line">    </span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(&quot;Father common block be called&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    static &#123;</span><br><span class="line">        System.out.println(&quot;Father static block be called&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public Father() &#123;</span><br><span class="line">        System.out.println(&quot;Father constructor be called&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>首先是Father类，该类有一个默认构造函数，有一个static的代码块，为了方便查看结果，还有一个普通代码块。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2014/08/01/Java中类的构造顺序/#more" class="more-link">阅读全文</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-07-25T06:33:00.000Z"><a href="/2014/07/25/[翻译]大牛告诉你一天时间能学些什么/">Jul 25 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/07/25/[翻译]大牛告诉你一天时间能学些什么/">[翻译]大牛告诉你一天时间能学些什么</a></h1>
  

    </header>
    <div class="entry">
      
        <p>为了学好一门编程语言，我们日复一日地看书、练习并参与实际的项目。就像马拉松，你坚持得越久，就收获得越多。在这样一个长期而乏味的时期内,你总是能有一些简短的时间——比如一天，去学点什么。学习到的这些技术将会给你带来巨大的满足感。</p>
<p>一个目前在谷歌工作的大牛，Jacob Jensen，给出了以下清单，清单上列出了一些你能在一天之内学会的技术。</p>
<ul>
<li><p>阅读你最喜欢的语言的手册。在过去，因为不知道python中有Counter计数器，我为此花费了许多时间。同时还得忍受因为使用字典充当计数器而不断出现的bug。有很多诸如此类的教训。</p>
</li>
<li><p>申请一个stackOverFlow帐号并学会使用这个网站。如果你是一个母语为英语的程序员，却不知道stactOverFlow是一个很好的资源，那你就真的错了。</p>
</li>
<li><p>独立实现一个简单的机器学习算法。并有一个完整的系统。就是说你读取一个简单的csv格式输入，把它划分成训练集和测试集，运行一个使用了可调整或者探索的超参数的简单算法，并且获得一份简单的相关统计输出。</p>
</li>
<li><p>学习怎样在Excel中画一个线形图。</p>
</li>
<li><p>学习怎样不使用Excel去画一个线性图。</p>
</li>
</ul>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2014/07/25/[翻译]大牛告诉你一天时间能学些什么/#more" class="more-link">阅读全文</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-07-23T04:16:15.000Z"><a href="/2014/07/23/代码实现Android流量统计/">Jul 23 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/07/23/代码实现Android流量统计/">代码实现Android流量统计</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>尽管现在WIFI的覆盖范围越来越广，但是设备（在这里设备指手机或平板）流量的使用仍然是用户很关注的一个点。因此，在APP中加入流量统计模块对于提升用户体验（让用户可以知晓使用了多少流量，可以使用户使用APP时更加放心）有很大帮助。</p>
<p>Android使用的是Linux内核，在Linux系统里，所有信息都是以文件的形式存在的，因此在Android中，所有应用的流量信息都将被保存在操作系统的文件中。</p>
<p>对于Android2.2之前，流量信息存储在proc/net/dev（或者 proc/self/net/dev）文件下，我们解析文件即可得到流量信息。</p>
<p>在Android2.2（API Level 8）之后，系统提供了TrafficStats类，我们可以通过该类来获取流量信息。需要注意一点的是，有些设备不支持流量统计，具体表现是，当调用TrafficStats的方法时将返回TrafficStats.UNSUPPORTED，这种情况下，我们需要自己去解析/sys/class/net/  下的log文件。</p>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>以下是TrafficStats类的一些主要方法（摘录自<a href="http://developer.android.com/reference/android/net/TrafficStats.html">android 官方API文档</a>）：</p>
<pre><code>static long getMobileRxBytes()
Return number of bytes received across mobile networks since device boot.

static long getMobileRxPackets()
Return number of packets received across mobile networks since device boot.

static long getMobileTxBytes()
Return number of bytes transmitted across mobile networks since device boot.

static long getMobileTxPackets()
Return number of packets transmitted across mobile networks since device boot.

static long getTotalRxBytes()
Return number of bytes received since device boot.

static long getTotalRxPackets()
Return number of packets received since device boot.

static long getTotalTxBytes()
Return number of bytes transmitted since device boot.

static long getTotalTxPackets()
Return number of packets transmitted since device boot.

static long getUidRxBytes(int uid)
Return number of bytes received by the given UID since device boot.

static long getUidRxPackets(int uid)
Return number of packets received by the given UID since device boot.

static long getUidTcpRxBytes(int uid)
This method was deprecated in API level 18. Starting in JELLY_BEAN_MR2, transport layer statistics are no longer available, and will always return UNSUPPORTED.

static long getUidTxPackets(int uid)
Return number of packets transmitted by the given UID since device boot.
</code></pre>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2014/07/23/代码实现Android流量统计/#more" class="more-link">阅读全文</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




<nav id="pagination">
  
    <a href="/page/5/" class="alignleft prev">上一页</a>
  
  
    <a href="/page/7/" class="alignright next">下一页</a>
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:huihui.name">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/Android/">Android</a><small>11</small></li>
  
    <li><a href="/categories/Android性能/">Android性能</a><small>2</small></li>
  
    <li><a href="/categories/Android朝花夕拾/">Android朝花夕拾</a><small>1</small></li>
  
    <li><a href="/categories/FFmpeg/">FFmpeg</a><small>1</small></li>
  
    <li><a href="/categories/Java/">Java</a><small>2</small></li>
  
    <li><a href="/categories/Kotlin/">Kotlin</a><small>1</small></li>
  
    <li><a href="/categories/在路上/">在路上</a><small>1</small></li>
  
    <li><a href="/categories/工具/">工具</a><small>2</small></li>
  
    <li><a href="/categories/感悟/">感悟</a><small>3</small></li>
  
    <li><a href="/categories/杂谈/">杂谈</a><small>2</small></li>
  
    <li><a href="/categories/笔试面试/">笔试面试</a><small>1</small></li>
  
    <li><a href="/categories/计算机网络/">计算机网络</a><small>1</small></li>
  
    <li><a href="/categories/记事/">记事</a><small>3</small></li>
  
    <li><a href="/categories/读书笔记/">读书笔记</a><small>4</small></li>
  
    <li><a href="/categories/这就是生活/">这就是生活</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><section>
Theme of <a href="https://github.com/zippera/lightum">Lightum</a>, Improved from <a href="https://github.com/hexojs/hexo-theme-light">Light</a>, by <a href="/">zippera</a> 
<p>Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></p>
</section>
<div class="clearfix"></div>
</footer>
  <script src="//libs.baidu.com/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</body>
</html>


<a href="https://github.com/zhenghuiy" target="_blank"><img style="position: absolute; top: 0; left: 0; border: 0;" src="/imgs/forkme_left_white_ffffff.png" alt="Fork me on GitHub"></a>
